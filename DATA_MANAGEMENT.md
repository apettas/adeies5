# Διαχείριση Δεδομένων - ΠΔΕΔΕ Leave Management System

Αυτό το σύστημα παρέχει management commands για τη διαχείριση των δεδομένων της εφαρμογής, διαξωρίζοντας τα **στατικά δεδομένα** από τα **δυναμικά δεδομένα**.

## Τύποι Δεδομένων

### 📁 Στατικά Δεδομένα (Δεν αλλάζουν συχνά)
- **Ρόλοι χρηστών** (Υπάλληλος, Προϊστάμενος, Χειριστής κ.λπ.)
- **Τμήματα/Υπηρεσίες** (Διεύθυνση, Τμήματα, Γραφεία)
- **Τύποι αδειών** (Κανονική, Ασθενείας, Μητρότητας κ.λπ.)

### 🔄 Δυναμικά Δεδομένα (Αλλάζουν κατά τη χρήση)
- **Χρήστες** και τα προφίλ τους
- **Αιτήσεις αδειών** και η κατάστασή τους
- **Ειδοποιήσεις** του συστήματος

## 🛠️ Available Commands

### 1. Φόρτωση Στατικών Δεδομένων

```bash
# Φόρτωση στατικών δεδομένων (αν δεν υπάρχουν)
docker-compose exec web python manage.py load_static_data

# Αναγκαστική ενημέρωση υπαρχόντων στατικών δεδομένων  
docker-compose exec web python manage.py load_static_data --force
```

**Τι κάνει:**
- Φορτώνει 5 βασικούς ρόλους χρηστών
- Δημιουργεί τη δομή τμημάτων της ΠΔΕΔΕ
- Προσθέτει 7 τύπους αδειών

### 2. Καθαρισμός Δυναμικών Δεδομένων

```bash
# Καθαρισμός όλων των δυναμικών δεδομένων
docker-compose exec web python manage.py clear_dynamic_data --all --confirm

# Καθαρισμός μόνο χρηστών
docker-compose exec web python manage.py clear_dynamic_data --users --confirm

# Καθαρισμός μόνο αιτήσεων αδειών
docker-compose exec web python manage.py clear_dynamic_data --leave-requests --confirm

# Καθαρισμός μόνο ειδοποιήσεων
docker-compose exec web python manage.py clear_dynamic_data --notifications --confirm
```

**Τι κάνει:**
- Διαγράφει χρήστες, αιτήσεις αδειών, ειδοποιήσεις
- Διατηρεί τον superuser `admin@pdede.gr`
- Διατηρεί όλα τα στατικά δεδομένα

### 3. Πλήρης Επαναφορά Βάσης

```bash
# Πλήρης επαναφορά με επιβεβαίωση
docker-compose exec web python manage.py reset_database

# Πλήρης επαναφορά χωρίς ερώτηση
docker-compose exec web python manage.py reset_database --force

# Πλήρης επαναφορά με ενημέρωση στατικών δεδομένων
docker-compose exec web python manage.py reset_database --force --update-static
```

**Τι κάνει:**
1. Καθαρίζει όλα τα δυναμικά δεδομένα
2. Επαναφορτώνει τα στατικά δεδομένα
3. Διασφαλίζει την ύπαρξη superuser

## 🔧 Σενάρια Χρήσης

### Έναρξη Ανάπτυξης/Testing
```bash
# Φόρτωση αρχικών δεδομένων σε καθαρή βάση
docker-compose exec web python manage.py load_static_data
```

### Καθαρισμός για Νέες Δοκιμές
```bash
# Καθαρισμός μόνο δυναμικών δεδομένων (διατήρηση στατικών)
docker-compose exec web python manage.py clear_dynamic_data --all --confirm
```

### Πλήρης Επαναφορά Συστήματος
```bash
# Επαναφορά όλης της βάσης από την αρχή
docker-compose exec web python manage.py reset_database --force
```

### Ενημέρωση Στατικών Δεδομένων
```bash
# Ενημέρωση στατικών δεδομένων μετά από αλλαγές
docker-compose exec web python manage.py load_static_data --force
```

## 🔐 Προεπιλεγμένος Superuser

Μετά από κάθε επαναφορά, θα υπάρχει διαθέσιμος ο παρακάτω superuser:

- **Email:** `admin@pdede.gr`
- **Password:** `admin123`
- **Ρόλοι:** Όλοι οι διαθέσιμοι ρόλοι

## ⚠️ Προσοχή

- Τα commands διαγραφής είναι **μη αναστρέψιμα**
- Πάντα να κάνετε backup πριν από πλήρη επαναφορά
- Σε production environment, χρησιμοποιήστε τα commands με προσοχή
- Ο superuser `admin@pdede.gr` διατηρείται πάντα στον καθαρισμό χρηστών

## 📊 Στατικά Δεδομένα που Φορτώνονται

### Ρόλοι (5)
- Υπάλληλος
- Προϊστάμενος Τμήματος  
- Χειριστής Αδειών
- Διαχειριστής
- Διαχειριστής Ανθρώπινου Δυναμικού

### Τμήματα (9)
- Διεύθυνση
- Αυτοτελής Διεύθυνση Εκπαίδευσης
- Τμήμα Πρωτοβάθμιας Εκπαίδευσης
- Τμήμα Δευτεροβάθμιας Εκπαίδευσης
- Τμήμα Διά Βίου Εκπαίδευσης
- Γραφείο Οικονομικής Διοίκησης
- Γραφείο Διοικητικής Υποστήριξης
- Γραφείο Ιδιωτικής Εκπαίδευσης
- Γραφείο Σχολικών Εργαστηρίων

### Τύποι Αδειών (7)
- Κανονική Άδεια (25 ημέρες)
- Άδεια Ασθενείας (30 ημέρες)
- Άδεια Μητρότητας (119 ημέρες)
- Άδεια Πατρότητας (14 ημέρες)
- Ειδική Άδεια (10 ημέρες)
- Εκπαιδευτική Άδεια (30 ημέρες)
- Έκτακτη Άδεια (5 ημέρες)
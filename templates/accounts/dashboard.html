{% extends 'base.html' %}

{% block title %}Dashboard - Σύστημα Αδειών ΠΔΕΔΕ{% endblock %}

{% block content %}
<div class="row mt-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Καλώς ήρθες, {{ user_full_name }}!</h2>
            <span class="badge bg-secondary fs-6">{{ user.get_role_display }}</span>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-4 mb-3">
        <div class="card text-center card-hover">
            <div class="card-body">
                <i class="bi bi-building fs-1 text-primary mb-3"></i>
                <h5 class="card-title">Τμήμα</h5>
                <p class="card-text">{{ department_name }}</p>
            </div>
        </div>
    </div>
    
    {% if user_role == 'employee' %}
    <div class="col-md-4 mb-3">
        <div class="card text-center card-hover">
            <div class="card-body">
                <i class="bi bi-calendar-check fs-1 text-success mb-3"></i>
                <h5 class="card-title">Οι Αιτήσεις μου</h5>
                <p class="card-text">{{ my_requests_count }} συνολικά</p>
                <a href="{% url 'leaves:employee_dashboard' %}" class="btn btn-success">Προβολή</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-3">
        <div class="card text-center card-hover">
            <div class="card-body">
                <i class="bi bi-clock fs-1 text-warning mb-3"></i>
                <h5 class="card-title">Εκκρεμούν</h5>
                <p class="card-text">{{ pending_requests_count }} αιτήσεις</p>
                <a href="{% url 'leaves:create_leave_request' %}" class="btn btn-primary">Νέα Αίτηση</a>
            </div>
        </div>
    </div>
    {% endif %}
    
    {% if user.is_department_manager %}
    <div class="col-md-4 mb-3">
        <div class="card text-center card-hover">
            <div class="card-body">
                <i class="bi bi-clipboard-check fs-1 text-info mb-3"></i>
                <h5 class="card-title">Προς Έγκριση</h5>
                <p class="card-text">{{ pending_approvals }} αιτήσεις</p>
                <a href="{% url 'leaves:manager_dashboard' %}" class="btn btn-info">Εγκρίσεις</a>
            </div>
        </div>
    </div>
    {% endif %}
    
    {% if user.is_leave_handler %}
    <div class="col-md-4 mb-3">
        <div class="card text-center card-hover">
            <div class="card-body">
                <i class="bi bi-gear fs-1 text-secondary mb-3"></i>
                <h5 class="card-title">Προς Επεξεργασία</h5>
                <p class="card-text">{{ pending_processing }} αιτήσεις</p>
                <a href="{% url 'leaves:handler_dashboard' %}" class="btn btn-secondary">Επεξεργασία</a>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-info-circle"></i> Οδηγίες Χρήσης</h5>
            </div>
            <div class="card-body">
                {% if user_role == 'employee' %}
                <h6>Ως Υπάλληλος μπορείτε:</h6>
                <ul>
                    <li>Να υποβάλλετε νέες αιτήσεις άδειας</li>
                    <li>Να παρακολουθείτε την κατάσταση των αιτήσεών σας</li>
                    <li>Να λαμβάνετε ειδοποιήσεις για τις αιτήσεις σας</li>
                </ul>
                {% elif user.is_department_manager %}
                <h6>Ως Προϊστάμενος μπορείτε:</h6>
                <ul>
                    <li>Να εγκρίνετε ή να απορρίπτετε αιτήσεις των υφισταμένων σας</li>
                    <li>Να προσθέτετε σχόλια στις εγκρίσεις/απορρίψεις</li>
                    <li>Να παρακολουθείτε τις αιτήσεις του τμήματός σας</li>
                </ul>
                {% elif user.is_leave_handler %}
                <h6>Ως Χειριστής Αδειών μπορείτε:</h6>
                <ul>
                    <li>Να επεξεργάζεστε αιτήσεις που έχουν εγκριθεί από προϊσταμένους</li>
                    <li>Να προσθέτετε αριθμούς πρωτοκόλλου</li>
                    <li>Να ολοκληρώνετε ή να απορρίπτετε αιτήσεις</li>
                </ul>
                {% endif %}
                
                <div class="alert alert-info mt-3">
                    <i class="bi bi-lightbulb"></i>
                    <strong>Συμβουλή:</strong> Χρησιμοποιήστε το κουδούνι στην επάνω δεξιά γωνία για να δείτε τις ειδοποιήσεις σας.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
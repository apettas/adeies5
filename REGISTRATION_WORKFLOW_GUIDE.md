# 📋 Οδηγός Registration Approval Workflow - ΠΔΕΔΕ
## Σύστημα Διαχείρισης Αδειών

---

## 🎯 Επισκόπηση

Το σύστημα διαθέτει πλήρη workflow εγκρίσεων για νέους χρήστες. Κανένας νέος χρήστης δεν μπορεί να έχει πρόσβαση στο σύστημα μέχρι να εγκριθεί από χειριστή αδειών.

---

## 👤 Για Νέους Χρήστες

### 🔗 Πού να κάνετε εγγραφή:
- **URL**: `/accounts/register/`
- **Από σελίδα σύνδεσης**: Κλικ στο κουμπί "Νέα Εγγραφή"

### 📝 Διαδικασία Εγγραφής:
1. **Επισκεφθείτε τη σελίδα εγγραφής**
2. **Συμπληρώστε τα απαιτούμενα στοιχεία**:
   - Email (πρέπει να είναι @sch.gr)
   - Όνομα και Επώνυμο
   - Κωδικός Υπαλλήλου (προαιρετικό)
   - Ειδικότητα (επιλογή από 35 διαθέσιμες)
   - Τμήμα (επιλογή από διαθέσιμα τμήματα)
   - Κωδικός Πρόσβασης (δύο φορές για επιβεβαίωση)

3. **Υποβολή αίτησης**
   - Η αίτησή σας θα είναι σε κατάσταση "🟡 Εκκρεμότητα"
   - Θα ενημερωθείτε για την επιτυχή υποβολή

### 🔍 Έλεγχος Κατάστασης Εγγραφής:
- **URL**: `/accounts/check-status/`
- **Από σελίδα σύνδεσης**: Κλικ στο κουμπί "Έλεγχος Κατάστασης"
- Εισάγετε το email σας για να δείτε την κατάσταση

### 📊 Καταστάσεις Εγγραφής:
- **🟡 Εκκρεμότητα**: Αναμένει έγκριση
- **✅ Εγκεκριμένη**: Μπορείτε να συνδεθείτε
- **❌ Απορριφθείσα**: Χρειάζεται επικοινωνία με χειριστή

---

## 🛡️ Για Χειριστές Αδειών (Leave Handlers)

### 🔐 Πρόσβαση στο Admin Interface:
- **URL**: `/admin/`
- **Σύνδεση**: με τα διαπιστευτήρια διαχειριστή
- **Τμήμα**: Users → Users

### 👥 Διαχείριση Εγγραφών:

#### 📋 Προβολή Εκκρεμών Εγγραφών:
1. Πηγαίνετε στο **Admin → Accounts → Users**
2. Χρησιμοποιήστε το φίλτρο **"By registration status"**
3. Επιλέξτε **"Εκκρεμότητα"** για να δείτε όλες τις εκκρεμείς αιτήσεις

#### ✅ Έγκριση Χρήστη:
1. **Επιλέξτε τον χρήστη** από τη λίστα
2. **Κλικ για επεξεργασία**
3. Στην ενότητα **"Registration Approval"**:
   - **Registration status**: Αλλάξτε σε "Εγκεκριμένη"
   - **Approval notes**: Προσθέστε σημειώσεις (προαιρετικό)
4. **Αποθήκευση**: Ο χρήστης γίνεται αυτόματα ενεργός

#### ❌ Απόρριψη Χρήστη:
1. **Επιλέξτε τον χρήστη** από τη λίστα
2. **Κλικ για επεξεργασία**
3. Στην ενότητα **"Registration Approval"**:
   - **Registration status**: Αλλάξτε σε "Απορριφθείσα"
   - **Approval notes**: Προσθέστε λόγο απόρριψης
4. **Αποθήκευση**: Ο χρήστης παραμένει ανενεργός

### 📊 Χρήσιμες Πληροφορίες Admin:
- **Χρωματικοί κωδικοί**: 🟡 Εκκρεμότητα, ✅ Εγκεκριμένη, ❌ Απορριφθείσα
- **Φίλτρα**: Κατάσταση εγγραφής, Τμήμα, Ειδικότητα
- **Αναζήτηση**: Όνομα, email, κωδικός υπαλλήλου
- **Μαζικές ενέργειες**: Εγκρίσεις πολλών χρηστών ταυτόχρονα

---

## 🔗 URLs Συστήματος

| Σελίδα | URL | Περιγραφή |
|--------|-----|-----------|
| **Εγγραφή** | `/accounts/register/` | Φόρμα εγγραφής νέων χρηστών |
| **Εκκρεμότητα** | `/accounts/registration-pending/` | Επιβεβαίωση υποβολής αίτησης |
| **Έλεγχος Κατάστασης** | `/accounts/check-status/` | Έλεγχος κατάστασης εγγραφής |
| **Σύνδεση** | `/accounts/login/` | Σελίδα σύνδεσης χρηστών |
| **Admin** | `/admin/` | Διαχείριση συστήματος |

---

## ⚙️ Τεχνικές Λεπτομέρειες

### 🏗️ Backend Implementation:
- **Custom User Model** με registration status fields
- **Registration Approval Methods**: `approve_registration()`, `reject_registration()`
- **Access Control**: `can_access_system()` method
- **UserRegistrationForm** με validation για @sch.gr emails
- **Enhanced Admin Interface** με φίλτρα και actions

### 🎨 Frontend Implementation:
- **Bootstrap 5** styling για όλες τις σελίδες
- **Responsive design** για mobile και desktop
- **Greek localization** σε όλα τα στοιχεία
- **Professional UI/UX** με χρωματικούς κωδικούς και εικονίδια

### 🔐 Security Features:
- **Email Validation**: Μόνο @sch.gr emails
- **Password Validation**: Strong password requirements
- **Access Control**: Inactive users δεν μπορούν να συνδεθούν
- **Admin Authentication**: Μόνο authorized users στο admin

---

## 📈 Workflow Diagram

```
[Νέος Χρήστης] 
    ↓
[Εγγραφή στο /accounts/register/]
    ↓
[Κατάσταση: 🟡 PENDING + is_active=False]
    ↓
[Χειριστής Αδειών στο Admin]
    ↓
[Έγκριση ή Απόρριψη]
    ↓
[✅ APPROVED + is_active=True] ή [❌ REJECTED + is_active=False]
    ↓
[Χρήστης μπορεί να συνδεθεί] ή [Χρήστης δεν μπορεί να συνδεθεί]
```

---

## 🚀 Χρήση στην Πράξη

### Για Νέους Χρήστες:
1. **Πηγαίνετε στο** `http://your-domain/accounts/login/`
2. **Κλικ "Νέα Εγγραφή"**
3. **Συμπληρώστε τη φόρμα**
4. **Περιμένετε έγκριση** (1-3 εργάσιμες ημέρες)
5. **Ελέγξτε κατάσταση** με "Έλεγχος Κατάστασης"

### Για Leave Handlers:
1. **Σύνδεση στο Admin** `http://your-domain/admin/`
2. **Πηγαίνετε σε Users**
3. **Φιλτράρετε "Εκκρεμότητα"**
4. **Επεξεργαστείτε και εγκρίνετε/απορρίψετε**

---

## 📞 Υποστήριξη

Για προβλήματα ή ερωτήσεις:
- **Νέοι Χρήστες**: Επικοινωνήστε με τον χειριστή αδειών του τμήματός σας
- **Leave Handlers**: Επικοινωνήστε με την τεχνική υποστήριξη ΠΔΕΔΕ
- **Διαχειριστές**: Ελέγξτε τα logs στο Django admin

---

## ✅ Status: Υλοποιημένο και Δοκιμασμένο

Το σύστημα έχει δοκιμαστεί πλήρως και είναι έτοιμο για παραγωγική χρήση. Όλα τα components λειτουργούν σωστά και το workflow έχει επιβεβαιωθεί.

**Τελευταία ενημέρωση**: 22/06/2025
**Version**: 1.0
**Status**: ✅ Production Ready